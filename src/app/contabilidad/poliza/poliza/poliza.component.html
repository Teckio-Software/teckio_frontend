<!-- Button cotainer -->
<div class="flex mt-1 mb-2">
  <button
    (click)="oprnDialogNewPoliza()"
    class="flex align-items-center rounded-md bg-colorButton transition-colors delay-75 hover:bg-colorButtonHover font-light text-white p-1"
  >
    <p
      class="text-[#f2f2f2] titular bg-custom-bg w-52 font-medium text-base tracking-wider m-0 text-center xs:text-[10px] xs:w-24"
    >
      Nueva póliza
    </p>
    <img class="xs:w-4" src="assets/add.svg" alt="botón agregar" />
  </button>
</div>
<!-- Button cotainer  end -->

<div class="overflow-x-auto whitespace-nowrap w-100 m-0 shadow-md rounded-lg">
  <table class="w-full text-sm">
    <thead class="bg-primario text-white">
      <tr>
        <th class="px-1 py-[2px]" scope="col">Folio</th>
        <th class="px-[2px] py-[2px]" scope="col">Num.Póliza</th>
        <th class="px-[2px] py-[2px]" scope="col">Fecha alta</th>
        <th class="px-[2px] py-[2px]" scope="col">Fecha póliza</th>
        <th class="px-[2px] py-[2px]" scope="col">Concepto</th>
        <th class="px-[2px] py-[2px]" scope="col">Estatus</th>
        <th class="px-[2px] py-[2px]" scope="col">Origen</th>
        <th class="px-[2px] py-[2px]" scope="col">Observaciones</th>
        <th class="px-[2px] py-[2px]" scope="col">Acciones</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray300">
      <ng-container *ngIf="isLoading">
         <tr>
            <!-- Folio -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Num.Poliza -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-32 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Fecha Alta -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Fecha Póliza -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Concepto -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-38 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Estatus -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Origen -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Observaciones -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-8 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
          <tr>
            <!-- Folio -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Num.Poliza -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-32 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Fecha Alta -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Fecha Póliza -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Concepto -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-38 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Estatus -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Origen -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Observaciones -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-8 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
          <tr>
            <!-- Folio -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Num.Poliza -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-32 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Fecha Alta -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Fecha Póliza -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Concepto -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-38 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Estatus -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Origen -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-22 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Observaciones -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-8 xs:w-24 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
      </ng-container>
      <tr
        *ngFor="let poliza of polizas"
        class="font-medium text-gray700 hover:bg-gray200 animation duration-200 xs:text-[8px]"
      >
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.folio }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.numeroPoliza }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.fechaAlta | date : "dd-MM-yyyy" }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.fechaPoliza | date : "dd-MM-yyyy" }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.concepto }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{
            poliza.estatus == 1
              ? "Contabilizada"
              : poliza.estatus == 2
              ? "Auditada"
              : poliza.estatus == 3
              ? "Cancelada"
              : ""
          }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.origenDePoliza == 1 ? "Manual" : "" }}
        </td>
        <td class="px-1 py-[2px]" (click)="cargarRegistrosDetalles(poliza.id)">
          {{ poliza.observaciones }}
        </td>
        <td class="px-1 py-[2px]">
          <!-- <button type="button" class="btn-acc" (click)="editar(poliza)" data-bs-target="#staticCreate"
            data-bs-toggle="modal" *ngIf="poliza.estatus == 1">Editar</button>
          {{ espacioBlanco }}
          <button type="button" class="btn-acc" (click)="cancelarPoliza(poliza)"
            *ngIf="poliza.estatus != 3">Cancelar</button> -->
          <div *ngIf="!isInfoOpen">
            <img
              ngbTooltip="Ver Poliza"
              triggers="mouseenter:mouseleave"
              class="cursor-pointer xs:w-4"
              src="./assets/visibility_btn.svg"
              alt="ver insumos"
              (click)="openModal(poliza)"
            />
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<!-- <div
  class="overflow-x-auto whitespace-nowrap w-100 mt-4 shadow-md rounded-lg"
  *ngIf="tieneDetalle"
>
  <table class="w-full text-sm">
    <thead class="bg-primario text-white">
      <tr>
        <th class="px-1 py-[2px]" scope="col" style="border: none">
          Cuenta Contable
        </th>
        <th class="px-[2px] py-[2px]" scope="col" style="border: none">
          Concepto
        </th>
        <th class="px-[2px] py-[2px]" scope="col" style="border: none">Debe</th>
        <th class="px-[2px] py-[2px]" scope="col" style="border: none">
          Haber
        </th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray300">
      <tr
        *ngFor="let detalle of polizasDetalles"
        class="font-medium text-gray700 hover:bg-gray200 animation duration-200 xs:text-[8px]"
      >
        <td class="px-1 py-[2px]">
          {{ detalle.cuentaContableCodigo }}
        </td>
        <td class="px-1 py-[2px]">
          {{ detalle.concepto }}
        </td>
        <td class="px-1 py-[2px]">
          {{ detalle.debe }}
        </td>
        <td class="px-1 py-[2px]">
          {{ detalle.haber }}
        </td>
      </tr>
    </tbody>

    <thead class="bg-primario text-white">
      <tr>
        <th colspan="2"></th>
        <th colspan="1">Debe</th>
        <th colspan="1">Haber</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-gray300">
      <tr
        class="font-medium text-gray700 hover:bg-gray200 animation duration-200"
      >
        <td class="px-1 py-[2px]" colspan="2"></td>
        <td class="px-1 py-[2px]" colspan="1">
          <input
            type="text"
            id="input-table"
            [(ngModel)]="totalDebe"
            class="bg-transparent w-full"
            disabled
          />
        </td>
        <td class="px-1 py-[2px]" colspan="1">
          <input
            type="text"
            id="input-table"
            class="bg-transparent w-full"
            [(ngModel)]="totalHaber"
            disabled
          />
        </td>
      </tr>
    </tbody>
  </table>
</div> -->

<div *ngIf="tieneDetalle">
  <app-poliza-modal
    [isOpen]="isOpen"
    [poliza]="polizaCreacion"
    [polizasDetalles]="polizasDetalles"
    [totalDebe]="totalDebe"
    [totalHaber]="totalHaber"
    (close)="closeModal()"
  ></app-poliza-modal>
</div>

<!--
<div class="cont-tables" *ngIf="tieneDetalle">
  <div>

    <div class="cont-table">
      <table #tablaMenu class="table table-striped table-hover">
        <thead>
          <tr>
            <th class="cabecera" scope="col" style="border: none;">Cuenta Contable</th>
            <th class="cabecera" scope="col" style="border: none;">Concepto</th>
            <th class="cabecera" scope="col" style="border: none;">Debe</th>
            <th class="cabecera" scope="col" style="border: none;">Haber</th>
          </tr>
        </thead>
      </table>
    </div>

    <div class="cont-table" style="max-height: 300px; overflow-y: auto; position: no-wrap; margin-top: -16px;">
      <table #tablaMenu class="table table-striped table-hover">
        <thead >
          <tr>
            <th class="cabeceraOpacity " scope="col"></th>
            <th class="cabeceraOpacity " scope="col"></th>
            <th class="cabeceraOpacity " scope="col"></th>
            <th class="cabeceraOpacity " scope="col"></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let detalle of polizasDetalles">
            <td class="body-table">
              {{detalle.cuentaContableCodigo}}
            </td>
            <td class="body-table">
              {{detalle.concepto}}
            </td>
            <td class="body-table">
              {{detalle.debe}}
            </td>
            <td class="body-table">
              {{detalle.haber}}
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <div class="modal-footer" style="width: 98%;">
      <tr>
        <td>
          <input type="text" class="form-control form-control-sm" id="input-table" [(ngModel)]="totalDebe"
              disabled>
        </td>
        <td>
           <input type="text" class="form-control form-control-sm" id="input-table"
              [(ngModel)]="totalHaber" disabled>
        </td>
      </tr>
    </div>
  </div>
</div> -->
