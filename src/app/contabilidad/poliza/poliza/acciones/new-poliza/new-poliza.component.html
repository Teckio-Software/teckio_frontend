<div class="fixed inset-0 z-10 w-screen overflow-y-auto" (click)="cerrar()">
    <div class="content-center sm:flex min-h-full items-cen justify-center p-4 text-center sm:items-center sm:p-0">
        <!-- Evita que el clic se propague al contenedor padre (overlay) -->

        <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-7xl"
            (click)="detenerCierre($event)">
            <!-- detenerCierre(event: MouseEvent): Método que detiene la propagación del evento de clic cuando se hace clic dentro del contenido del modal, asegurando que el modal no se cierre inadvertidamente. -->
            <div class="m-2 flex justify-between">
                <h2 class="font-normal tracking-[2px] leading-8  text-base">Nuevo poliza</h2>
                <button type="button" class=" leading-none absolute top-0 right-0 px-4 py-3 text-2xl"
                    (click)="cerrar()">&times;</button>

            </div>
            <div class="bg-white px-4">
                <div>
                   
                    <div [formGroup]="form">
                        <div class="modal-body" class="cont-input">

                          <div class="grid grid-cols-2 gap-2">
                            <div class="input-poliza">
                              <div class="flex flex-col">
                              <label class="label-1" id="inputGroup-sizing-sm">Fecha póliza</label>
  
                                <input formControlName="fechaPoliza" id="fechaPoliza" type="date" class="form-control"
                                  aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                              </div>
                            </div>
                            <div class="input-poliza">
                              <div class="flex  flex-col">
                                <label class="label-1" id="inputGroup-sizing-sm">Tipo de póliza</label>
                                <select formControlName="idTipoPoliza" id="idTipoPoliza"  class="form-select"
                                  aria-label="Default select example" (change)="obtenerFolio()">
                                  <option value="0"></option>
                                  <option *ngFor="let tipoDePoliza of tiposPolizas" [value]="tipoDePoliza.id">{{tipoDePoliza.descripcion}}
                                  </option>
                                </select>
                              </div>
                              
                            </div>
                          </div>
                          
                          
                          <div class="grid grid-cols-2 gap-2">
                            <div class="" style=" display: flex; flex-direction: column;">
                              <label class="label-1" id="inputGroup-sizing-sm">Folio</label>
                              <input formControlName="folio" id="folio" type="text" class="form-control"
                              aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                            </div>
                            <div class="" style=" display: flex; flex-direction: column;">
                              <label class="label-1" id="inputGroup-sizing-sm">Número de póliza</label>
                              <input formControlName="numeroPoliza" id="numeroPoliza" type="text" class="form-control"
                              (change)="obtenerFolio()" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                            </div>
                          </div>
                        
                          <div class="input-poliza">
                            <div class="flex flex-col">
                            <label class="label-1" id="inputGroup-sizing-sm">Fecha alta</label>

                              <input formControlName="fechaAlta" id="fechaAlta" type="text" class="form-control"
                                aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                            </div>
                          </div>
                          
                          <div class="grid grid-cols-2 gap-2">
                            <div class="input-poliza">
                              <div class="flex flex-col">
                              <label class="label-1" id="inputGroup-sizing-sm">Concepto</label>
  
                                <input formControlName="concepto" id="concepto" type="text" class="form-control"
                                  aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                              </div>
                            </div>
                            <div class="input-poliza">
                              <div class="flex flex-col">
                              <label class="label-1" id="inputGroup-sizing-sm">Observaciones</label>
  
                                <input formControlName="observaciones" id="observaciones" type="text" class="form-control"
                                  aria-label="Sizing example input" aria-describedby="inputGroup-sizing-sm">
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>


                         <div class="modal-body">
        <table #tablaMenu class="table table-striped table-hover mt-2">
          <thead>
            <tr>
              <th class="cabecera" scope="col" style="width: 50%;">Cuenta contable</th>
              <th class="cabecera" scope="col" style="width: 20%;">Concepto</th>
              <th class="cabecera" scope="col" style="width: 15%;">Debe</th>
              <th class="cabecera" scope="col" style="width: 15%;">Haber</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let polizaDetalle of polizasDetallesCreacion">
              <td style="width: 50%;" class="body-table">

                <select id="input-table" class="bg-transparent w-full" aria-label="Default select example"
                  [(ngModel)]="polizaDetalle.idCuentaContable">
                  <input type="text" placeholder="Username" aria-label="Username">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                  <input type="text">
                  <option *ngFor="let cuentaContable of cuentasContables" [value]="cuentaContable.id">
                    {{cuentaContable.codigo}} / {{cuentaContable.descripcion}}</option>
                </select>
<!--
                <div class="input-group mb-3">
                  <button class="btn  dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: #0084ffd3; color: #f2f2f2;">Cuenta contable</button>
                  <ul class="dropdown-menu cuentas-contables">
                    <li *ngFor="let cuentaContable of cuentasContables"><p class="dropdown-item">{{cuentaContable.codigo}} / {{cuentaContable.descripcion}}</p></li>
                  </ul>
                  <input type="text" class="form-control" aria-label="Text input with dropdown button">
                </div> -->
              </td>
              <td style="width: 20%;" class="body-table">
                <input type="text" class="bg-transparent w-full" id="input-table"
                  [(ngModel)]="polizaDetalle.concepto" (keydown.enter)="agregarDetalle(polizaDetalle)">
              </td>
              <td style="width: 15%;" class="body-table">
                <input type="text" class="bg-transparent w-full" id="input-table"
                  [(ngModel)]="polizaDetalle.debe" (keydown.enter)="agregarDetalle(polizaDetalle)"
                  (ngModelChange)="reiniciaHaber(polizaDetalle)">
              </td>
              <td style="width: 15%;" class="body-table">
                <input type="text" class="bg-transparent w-full" id="input-table"
                  [(ngModel)]="polizaDetalle.haber" (keydown.enter)="agregarDetalle(polizaDetalle)"
                  (ngModelChange)="reiniciaDebe(polizaDetalle)">
              </td>
            </tr>
          </tbody>

          <thead class="m-2">
            <tr>
              <th class="cabeceratest" colspan="2"></th>
              <th class="cabecerab" colspan="1">Debe</th>
              <th class="cabecerab" colspan="1">Haber</th>
            </tr>
          </thead>
          <thead>
            <tr>
              <td colspan="2" class="tablaTotal">
                
              </td>
              <td class="cont-total" colspan="1">
                <input type="text" class="bg-transparent w-full" id="input-table" [(ngModel)]="totalDebeCreacion"
                  disabled>
              </td>
              <td class="cont-total" colspan="1">
                <input type="text" class="bg-transparent w-full" id="input-table" [(ngModel)]="totalHaberCreacion"
                  disabled>
              </td>
            </tr>
          </thead>
          
        </table>

        <!-- <tbody> -->

        <!-- </tbody> -->

        
      </div>
                </div>
            </div>
            <div class="bg-gray-50 px-2 py-2 sm:flex sm:flex-row-reverse sm:px-6 sm:gap-4">
                <button
                    class="bg-[#51aec7] hover:bg-[#002B53] text-[#f2f2f2]  py-2 px-4 rounded-sm mr-2 mt-3  inline-flex w-full justify-center shadow-sm ring-1 ring-inset  sm:mt-0 sm:w-auto"
                   (click)="guardar()" >Aceptar</button>
                <button
                    class="mt-3 inline-flex w-full justify-center rounded-sm bg-[#51aec7] text-[#f2f2f2] px-3 py-2 text-sm shadow-sm ring-1 ring-inset  hover:bg-[#B05B5B] sm:mt-0 sm:w-auto  "
                    (click)="cerrar()">Cancelar</button>
            </div>

        </div>
    </div>
</div>