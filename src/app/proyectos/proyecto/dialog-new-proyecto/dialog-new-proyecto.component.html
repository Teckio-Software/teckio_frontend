<section>
  <div class="fixed inset-0 z-10 w-screen overflow-y-auto" (click)="cerrarDialog()">
    <div
      class="content-center sm:flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"
    >
      <div
        class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl"
        (click)="detenerCierre($event)"
      >
        <!-- Cabecera -->
        <div class="flex justify-between items-center border-b px-4 py-3">
          <h2 class="font-semibold text-gray-800 tracking-wider text-lg">
            {{ dialogTitle }}
          </h2>
          <button
            type="button"
            class="leading-none text-2xl px-3 py-1 text-gray-500 hover:text-gray-700"
            (click)="cerrarDialog()"
          >
            &times;
          </button>
        </div>

        <!-- Contenido -->
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <form [formGroup]="form">
            <div *ngIf="menu1">
              <p class="text-red-600" *ngIf="errGlobal">*Debes capturar todos los campos</p>
              <div class="flex justify-center gap-2 xs:gap-8 mb-4 w-full">
                <div class="w-1/3">
                  <label for="codigoProyecto" class="block text-sm font-medium text-gray-700 mb-1"
                    >Código</label
                  >
                  <input
                    formControlName="codigoProyecto"
                    type="text"
                    id="codigoProyecto"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    (change)="errCo.estatus = false; errGlobal = false"
                  />
                  <p class="text-red-600 text-center" *ngIf="errCo.estatus">
                    *{{ errCo.descripcion }}
                  </p>
                </div>

                <div class="w-2/3">
                  <label for="nombre" class="block text-sm font-medium text-gray-700 mb-1"
                    >Nombre</label
                  >
                  <input
                    formControlName="nombre"
                    type="text"
                    id="nombre"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    (change)="errNo.estatus = false; errGlobal = false"
                  />
                  <p class="text-red-600" *ngIf="errNo.estatus">*{{ errNo.descripcion }}</p>
                </div>
              </div>
              <div class="flex justify-center gap-2 xs:gap-8 mb-4 w-full">
                <div class="w-[26%]">
                  <label
                    for="codigoPostal"
                    class="sm:block hidden text-sm font-medium text-gray-700 mb-1"
                    >Código postal</label
                  >
                  <label
                    for="codigoPostal"
                    class="block sm:hidden text-sm font-medium text-gray-700 mb-1"
                    >C.P.</label
                  >
                  <input
                    formControlName="codigoPostal"
                    type="text"
                    id="codigoPostal"
                    appOnlyNumbers
                    maxlength="5"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    (change)="errCP = false; errGlobal = false"
                  />
                  <p class="text-red-600 text-center" *ngIf="errCP">
                    *El campo código postal es obligatorio
                  </p>
                </div>
                <div class="w-[74%]">
                  <label for="domicilio" class="block text-sm font-medium text-gray-700 mb-1"
                    >Domicilio</label
                  >
                  <input
                    formControlName="domicilio"
                    type="text"
                    id="domicilio"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    (change)="errDo.estatus = false; errGlobal = false"
                  />
                  <p class="text-red-600" *ngIf="errDo.estatus">*{{ errDo.descripcion }}</p>
                </div>
              </div>
              <div class="flex justify-center gap-2 xs:gap-8 mb-4 w-full">
                <div class="w-1/3">
                  <label for="iva" class="block text-sm font-medium text-gray-700 mb-1">IVA</label>
                  <input
                    formControlName="porcentajeIva"
                    type="number"
                    id="iva"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                    (change)="errIVA = false; errGlobal = false"
                  />
                  <p class="text-red-600 text-center" *ngIf="errIVA">
                    *El campo IVA es obligatorio
                  </p>
                </div>

                <div class="w-1/3">
                  <label for="anticipo" class="block text-sm font-medium text-gray-700 mb-1"
                    >Anticipo</label
                  >
                  <input
                    formControlName="anticipo"
                    type="number"
                    id="anticipo"
                    min="0"
                    max="100"
                    (click)="selectAll($event)"
                    (change)="validarAnticipo(); errGlobal = false"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <p class="text-yellow-600 text-center" *ngIf="errorAnticipo">
                    *Ingrese un valor entre 0 y 100.
                  </p>
                </div>

                <div class="w-1/3">
                  <label for="moneda" class="block text-sm font-medium text-gray-700 mb-1"
                    >Divisa</label
                  >
                  <select
                    id="moneda"
                    formControlName="moneda"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm bg-white focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  >
                    <option value="MXN">Pesos</option>
                    <option value="DLL">Dólares</option>
                  </select>
                </div>
              </div>
              <div>
                <div class="flex justify-center gap-8 mb-4">
                  <div class="flex flex-col w-1/2">
                    <label for="fechaInicio" class="block text-sm font-medium text-gray-700 mb-1"
                      >Fecha de inicio</label
                    >
                    <input
                      type="date"
                      id="fechaInicio"
                      formControlName="fechaInicio"
                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      placeholder="Insertar fecha"
                      (change)="errFI = false; errGlobal = false"
                    />
                    <p class="text-red-600" *ngIf="errFI">
                      *El campo fecha de inicio es obligatorio
                    </p>
                  </div>
                  <div class="flex flex-col w-1/2">
                    <label for="fechaFinal" class="block text-sm font-medium text-gray-700 mb-1"
                      >Fecha de término</label
                    >
                    <input
                      type="date"
                      id="fechaFinal"
                      formControlName="fechaFinal"
                      class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                      placeholder="Insertar fecha"
                      (change)="errFT = false; errGlobal = false"
                    />
                    <p class="text-red-600" *ngIf="errFT">
                      *El campo fecha de término es obligatorio
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>
        <div class="relative w-full">
          <!-- Pie con botones -->
          <div class="bg-gray-50 px-4 py-3 flex justify-end gap-4">
            <button
              class="bg-primario text-white py-2 px-4 rounded-md flex gap-2 justify-center items-center"
              (click)="guardar()"
            >
              <img src="./assets/floppy-disk-solid-full.svg" alt="Guardar" class="w-4" />
              {{ primaryButtonLabel }}
            </button>
            <button
              class="bg-white hover:bg-slate-500 transition-colors py-2 px-4 rounded-md flex gap-2 justify-center items-center border border-[#C9C9C9]"
              (click)="cerrarDialog()"
            >
              <img src="./assets/xmark-solid-full.svg" alt="Cerrar" class="w-4" />
              <p class="text-[#1C1B1F] m-0 font-medium">Cancelar</p>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
