<section>
  <div class="flex">
    <button
      (click)="openDialogNewInsumo()"
      class="flex align-items-center rounded-md bg-colorButton transition-colors delay-75 hover:bg-colorButtonHover font-light text-white p-1 mb-3"
    >
      <p
        class="text-[#f2f2f2] titular bg-custom-bg w-52 font-medium text-base tracking-wider m-0 text-center xs:text-[10px] xs:w-24"
      >
        Nuevo insumo
      </p>
      <img src="assets/add.svg" alt="" />
    </button>
  </div>
  <div class="overflow-x-auto shadow-md rounded-lg">
    <table class="w-full text-sm xs:table-fixed">
      <thead class="bg-primario text-white">
        <tr>
          <th scope="col" class="px-1 py-[2px] xs:w-[75px]">Código</th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px]">Descripción</th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px]">Unidad</th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px]">
            Costo Unitario
          </th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px]">Tipo Insumo</th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px]">
            Familia Insumo
          </th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px] text-center">
            Acciones
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray300">
        <tr *ngIf="paginatedInsumos.length === 0">
          <td colspan="2" class="text-center text-gray-700 font-medium py-1">
            No hay insumos registrados.
          </td>
        </tr>
        <tr
          *ngFor="let insumo of paginatedInsumos"
          class="font-medium text-gray700 hover:bg-gray200 animation duration-200 xs:text-[8px]"
        >
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="w-full"
              id="input-table"
              [(ngModel)]="insumo.codigo"
              (keydown.enter)="editar(insumo)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="w-full"
              id="input-table"
              [(ngModel)]="insumo.descripcion"
              (keydown.enter)="editar(insumo)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="w-full"
              id="input-table"
              [(ngModel)]="insumo.unidad"
              (keydown.enter)="editar(insumo)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="w-full"
              id="input-table"
              [(ngModel)]="insumo.costoUnitario"
              (keydown.enter)="editar(insumo)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <select
              [(ngModel)]="insumo.idTipoInsumo"
              id="idTipoInsumo"
              class="w-full"
              (ngModelChange)="editar(insumo)"
            >
              <option value="0"></option>
              <option *ngFor="let tipo of tiposInsumo" [value]="tipo.id">
                {{ tipo.descripcion }}
              </option>
            </select>
          </td>
          <td class="px-1 py-[2px]">
            <select
              [(ngModel)]="insumo.idFamiliaInsumo"
              id="idFamiliaInsumo"
              class="w-full"
              (ngModelChange)="editar(insumo)"
            >
              <option value="0"></option>
              <option
                *ngFor="let familia of familiasInsumo"
                [value]="familia.id"
              >
                {{ familia.descripcion }}
              </option>
            </select>
          </td>
          <td class="px-1 py-[2px]">
            <div class="flex justify-center m-0.5">
              <button
                ngbTooltip="Eliminar"
                placement="end"
                triggers="mouseenter:mouseleave"
                (click)="borrar(insumo.id)"
              >
                <img src="assets/delete.svg" alt="Botón de eliminar" />
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="flex bg-[#ffffff] justify-end rounded-b-[3px]">
      <div class="flex items-center">
        {{ getPaginationInfo() }}
      </div>
      <nav class="p-2">
        <ul class="flex">
          <li class="flex items-center">
            <a
              class="mx-1 flex h-7 w-7 items-center justify-center rounded-full border border-blue-gray-100 bg-transparent p-0 text-sm text-blue-gray-500 transition duration-150 ease-in-out hover:bg-[#2d748d] cursor-pointer"
              (click)="previousPage()"
              aria-label="Previous"
            >
              <span class="material-icons text-sm">keyboard_arrow_left</span>
            </a>
          </li>
          <li *ngFor="let page of visiblePages" class="flex items-center">
            <a
              class="mx-1 flex h-7 w-7 items-center justify-center rounded-full hover:bg-[#2d748d] cursor-pointer"
              [ngClass]="{
                'bg-colorButton text-[#ffffff] shadow-md': currentPage === page,
                'border border-blue-gray-100 bg-transparent text-blue-gray-500 hover:bg-[#2d748d]':
                  currentPage !== page
              }"
              [class.active]="page === currentPage"
              (click)="goToPage(page)"
            >
              {{ page }}
            </a>
          </li>
          <li class="flex items-center">
            <a
              class="mx-1 flex h-7 w-7 items-center justify-center rounded-full border border-blue-gray-100 bg-transparent p-0 text-sm text-blue-gray-500 transition duration-150 ease-in-out hover:bg-light-300 cursor-pointer"
              (click)="nextPage()"
              aria-label="Next"
            >
              <span class="material-icons text-sm">keyboard_arrow_right</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</section>
