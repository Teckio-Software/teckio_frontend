<section>
  <div class="fixed inset-0 z-10 w-screen overflow-y-auto" (click)="cerrar()">
    <div
      class="content-center sm:flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"
    >
      <div
        class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-4xl"
        (click)="detenerCierre($event)"
      >
        <!-- Cabecera -->
        <div class="flex justify-between items-center border-b px-4 py-3">
          <h2 class="font-semibold text-gray-800 tracking-wider text-lg">
            Nuevo cliente
          </h2>
          <button
            type="button"
            class="leading-none text-2xl px-3 py-1 text-gray-500 hover:text-gray-700"
            (click)="cerrar()"
          >
            &times;
          </button>
        </div>

        <!-- Contenido -->
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <div *ngIf="errorGlobal" class="text-red-500 text-sm mb-2">
            *Capture todos los campos obligatorios
          </div>
          <form [formGroup]="formulario" class="space-y-4">
            <!-- Primera columna de inputs -->
            <div>
              <label
                class="block text-sm font-medium text-gray-700"
                for="razonsocial"
                >Razón social</label
              >
              <input
                id="razonsocial"
                type="text"
                placeholder="Escribe el nombre completo"
                formControlName="razonsocial"
                (change)="errorRS = false; errorGlobal = false"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
              <div *ngIf="errorRS" class="text-red-500 text-sm mb-2">
              *El campo 'Razón social' es requerido
              </div>
            </div>

            <div>
              <label class="block text-sm font-medium text-gray-700" for="rfc"
                >RFC</label
              >
              <input
                id="rfc"
                type="text"
                placeholder="Escribe el RFC"
                formControlName="rfc"
                (change)="errorRFC.estatus = false; errorGlobal = false"
                appUppercaseInput
                maxlength="13"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
              <p [ngClass]="formulario.value.rfc.length >= 12? 'text-green-400' : errorRFC.estatus ? 'text-red-500' : 'text-gray-500'" class="text-sm w-full text-end">{{formulario.value.rfc.length}}/13</p>
              <div *ngIf="errorRFC.estatus" class="text-red-500 text-sm mb-2">
                *{{ errorRFC.descripcion }}
              </div>
            </div>

            <div class="flex gap-2">
              <div class="w-1/2" >
              <label class="block text-sm font-medium text-gray-700" for="email"
                >Correo electrónico</label
              >
              <input
                id="email"
                type="email"
                placeholder="Escribe el correo electrónico"
                formControlName="email"
                (change)="errorCE.estatus = false; errorGlobal = false"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
              <div *ngIf="errorCE.estatus" class="text-red-500 text-sm mb-2">
                *{{ errorCE.descripcion }}
              </div>
            </div>

            <div class="w-1/2" >
              <label
                class="block text-sm font-medium text-gray-700"
                for="telefono"
                >Teléfono</label
              >
              <input
                id="telefono"
                type="text"
                placeholder="Escribe el teléfono"
                formControlName="telefono"
                appOnlyNumbers
                maxlength="10"
                (change)="errorTel.estatus= false; errorGlobal = false"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
              <div class="flex w-full">
                
              <div *ngIf="errorTel.estatus" class="text-red-500 text-sm mb-2 w-2/3">
                *{{ errorTel.descripcion }}
              </div>
              <div *ngIf="!errorTel.estatus" class="w-2/3">
              </div>
              <div class="w-1/3 flex justify-end" >
                <p [ngClass]="formulario.value.telefono.length >= 10? 'text-green-400' : errorRFC.estatus ? 'text-red-500' : 'text-gray-500'" class="text-sm w-full text-end">{{formulario.value.telefono.length}}/10</p>
                </div>
              </div>
              
            </div>
            </div>

            

            <div>
              <label
                class="block text-sm font-medium text-gray-700"
                for="representante"
                >Representante legal</label
              >
              <input
                id="representante"
                type="text"
                placeholder="Escribe el representante legal"
                formControlName="representante"
                (change)="errorRL = false; errorGlobal = false"
                class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
              />
              <div *ngIf="errorRL" class="text-red-500 text-sm mb-2">
                *El campo 'Representante legal' es requerido
              </div>
            </div>

            <!-- Segunda columna con inputs dobles en fila -->
            <div class="flex flex-col gap-4">
              <div>
                <label
                  class="block text-sm font-medium text-gray-700"
                  for="domicilio"
                  >Domicilio</label
                >
                <input
                  id="domicilio"
                  type="text"
                  placeholder="Escribe el domicilio"
                  formControlName="domicilio"
                  (change)="errorDm = false; errorGlobal = false"
                  class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                />
                <div *ngIf="errorDm" class="text-red-500 text-sm mb-2">
                  *El campo 'Domicilio' es requerido
                </div>
              </div>

              <div class="flex gap-4">
                <div class="w-full">
                  <label
                    class="block text-sm font-medium text-gray-700"
                    for="numeroE"
                    >Número exterior</label
                  >
                  <input
                    id="numeroE"
                    type="text"
                    placeholder="24-A"
                    formControlName="numeroE"
                    (change)="errorNE = false; errorGlobal = false"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <div *ngIf="errorNE" class="text-red-500 text-sm mb-2">
                  *El campo 'Número exterior' es requerido
                </div>
                </div>

                <div class="w-full">
                  <label
                    class="block text-sm font-medium text-gray-700"
                    for="codigoPostal"
                    >Código postal</label
                  >
                  <input
                    id="codigoPostal"
                    type="text"
                    placeholder="Código postal"
                    formControlName="codigoPostal"
                    (change)="errorCP = false; errorGlobal = false"
                    appOnlyNumbers
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <div *ngIf="errorCP" class="text-red-500 text-sm mb-2">
                  *El campo 'Código postal' es requerido
                </div>
                </div>
              </div>

              <div class="flex gap-4">
                <div class="w-full">
                  <label
                    class="block text-sm font-medium text-gray-700"
                    for="colonia"
                    >Colonia</label
                  >
                  <input
                    id="colonia"
                    type="text"
                    placeholder="Nombre de la colonia"
                    formControlName="colonia"
                    (change)="errorCol = false; errorGlobal = false"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <div *ngIf="errorCol" class="text-red-500 text-sm mb-2">
                  *El campo 'Colonia' es requerido
                  </div>
                </div>

                <div class="w-full">
                  <label
                    class="block text-sm font-medium text-gray-700"
                    for="municipio"
                    >Municipio</label
                  >
                  <input
                    id="municipio"
                    type="text"
                    placeholder="Nombre del municipio"
                    formControlName="municipio"
                    (change)="errorMun = false; errorGlobal = false"
                    class="mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"
                  />
                  <div *ngIf="errorMun" class="text-red-500 text-sm mb-2">
                  *El campo 'Municipio' es requerido
                  </div>
                </div>
              </div>
            </div>
          </form>
        </div>

        <!-- Pie con botones -->
        <div class="bg-gray-50 px-4 py-3 flex justify-end gap-4">
          <button
            class="bg-colorButton hover:bg-colorButtonHover text-white py-2 px-4 rounded-md inline-flex justify-center shadow-sm ring-1 ring-inset transition-all"
            (click)="guardarCliente()"
          >
            Aceptar
          </button>
          <button
            class="bg-colorButton hover:bg-colorButtonHover text-white py-2 px-4 rounded-md inline-flex justify-center shadow-sm ring-1 ring-inset transition-all"
            (click)="cerrar()"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
