<section class="flex flex-col">
  <div class="flex">
    <button
      (click)="openDialogNewFamily()"
      class="flex align-items-center rounded-md bg-colorButton transition-colors delay-75 hover:bg-colorButtonHover font-light text-white p-1 mb-3"
    >
      <p
        class="text-[#f2f2f2] titular bg-custom-bg w-52 font-medium text-base tracking-wider m-0 text-center xs:text-[10px] xs:w-24"
      >
        Nueva familia de Insumo
      </p>
      <img src="assets/add.svg" alt="" />
    </button>
  </div>
  <div class="overflow-x-auto shadow-md rounded-lg">
    <table class="w-full text-sm xs:table-fixed">
      <thead class="bg-primario text-white">
        <tr>
          <th scope="col" class="px-1 py-[2px] xs:w-[75px]">Descripci贸n</th>
          <th scope="col" class="px-[2px] py-[2px] xs:w-[70px] text-center">
            Acciones
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray300">
        <tr *ngIf="paginatedFamilia.length === 0 && !isLoading">
          <td colspan="2" class="text-center text-gray-700 font-medium py-1">
            No hay familias de insumos registradas.
          </td>
        </tr>
        <ng-container *ngIf="isLoading">
          <tr>
            <!-- Descripci贸n -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-40 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td scope="col">
              <div
                role="status"
                class="flex justify-center align-items-centermax-w-sm animate-pulse"
              >
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
          <tr>
            <!-- Descripci贸n -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-40 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td scope="col">
              <div
                role="status"
                class="flex justify-center align-items-centermax-w-sm animate-pulse"
              >
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
          <tr>
            <!-- Descripci贸n -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-40 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td scope="col">
              <div
                role="status"
                class="flex justify-center align-items-centermax-w-sm animate-pulse"
              >
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
        </ng-container>
        <tr
          *ngFor="let familia of paginatedFamilia"
          class="font-medium text-gray700 hover:bg-gray200 animation duration-200 xs:text-[8px]"
        >
          <td class="px-1 py-[2px]">
            <input
              class="bg-transparent w-full"
              type="text"
              id="input-table"
              [(ngModel)]="familia.descripcion"
              (keydown.enter)="editar(familia)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <div class="flex justify-center m-0.5">
              <button
                ngbTooltip="Eliminar"
                placement="end"
                triggers="mouseenter:mouseleave"
                (click)="abrirDialogo(familia.id)"
              >
                <img src="assets/delete.svg" alt="" />
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div class="flex bg-[#ffffff] justify-end rounded-b-[3px]">
      <div class="flex items-center">
        {{ getPaginationInfo() }}
      </div>
      <nav class="p-2">
        <ul class="flex">
          <li class="flex items-center">
            <a
              class="mx-1 flex h-7 w-7 items-center justify-center rounded-full border border-blue-gray-100 bg-transparent p-0 text-sm text-blue-gray-500 transition duration-150 ease-in-out hover:bg-[#2d748d] cursor-pointer"
              (click)="previousPage()"
              aria-label="Previous"
            >
              <span class="material-icons text-sm">keyboard_arrow_left</span>
            </a>
          </li>
          <li *ngFor="let page of visiblePages" class="flex items-center">
            <a
              class="mx-1 flex h-7 w-7 items-center justify-center rounded-full hover:bg-[#2d748d] cursor-pointer"
              [ngClass]="{
                'bg-colorButton text-[#ffffff] shadow-md': currentPage === page,
                'border border-blue-gray-100 bg-transparent text-blue-gray-500 hover:bg-[#2d748d]':
                  currentPage !== page
              }"
              [class.active]="page === currentPage"
              (click)="goToPage(page)"
            >
              {{ page }}
            </a>
          </li>
          <li class="flex items-center">
            <a
              class="mx-1 flex h-7 w-7 items-center justify-center rounded-full border border-blue-gray-100 bg-transparent p-0 text-sm text-blue-gray-500 transition duration-150 ease-in-out hover:bg-light-300 cursor-pointer"
              (click)="nextPage()"
              aria-label="Next"
            >
              <span class="material-icons text-sm">keyboard_arrow_right</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</section>
