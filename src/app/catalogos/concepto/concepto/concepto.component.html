<section class="flex flex-col">
  <div class="flex">
    <button
      (click)="openDialogNewConcepto()"
      class="flex align-items-center rounded-md bg-colorButton transition-colors delay-75 hover:bg-colorButtonHover font-light text-white p-1"
    >
      <p
        class="text-[#f2f2f2] titular bg-custom-bg w-52 font-medium text-base tracking-wider m-0 text-center xs:text-[10px] xs:w-24"
      >
        Nuevo concepto
      </p>
      <img src="assets/add.svg" alt="" />
    </button>
  </div>

  <p class="text-sm font-medium mb-2 mt-2 text-gray700 xs:text-[10px]">
    Campos obligatorios marcados con <span class="font-bold">*</span>
  </p>

  <div class="overflow-x-auto shadow-md rounded-lg">
    <table class="w-full text-sm xs:table-fixed">
      <thead class="bg-primario text-white">
        <tr>
          <th class="px-1 py-[2px] xs:w-[75px]" scope="col">Código*</th>
          <th class="px-[2px] py-[2px] xs:w-[70px]" scope="col">
            Descripción*
          </th>
          <th class="px-[2px] py-[2px] xs:w-[75px] text-center" scope="col">
            Unidad*
          </th>
          <th class="px-[2px] py-[2px] xs:w-[75px]" scope="col">Costo*</th>
          <th class="px-[2px] py-[2px] xs:w-[75px]" scope="col">
            Especialidad*
          </th>
          <th class="px-[2px] py-[2px] xs:w-[75px] text-center" scope="col">
            Acciones
          </th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray300">
        <ng-container *ngIf="isLoading">
          <tr>
            <!-- Código -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Descripción -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-48 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Unidad -->
            <td class="px-1" scope="col">
              <div role="status" class="flex justify-center animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Costo -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-32 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Especialidad -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-48 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td scope="col">
              <div
                role="status"
                class="flex justify-center align-items-centermax-w-sm animate-pulse"
              >
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
          <tr>
            <!-- Código -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Descripción -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-48 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Unidad -->
            <td class="px-1" scope="col">
              <div role="status" class="flex justify-center animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Costo -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-32 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Especialidad -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-48 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td scope="col">
              <div
                role="status"
                class="flex justify-center align-items-centermax-w-sm animate-pulse"
              >
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
          <tr>
            <!-- Código -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Descripción -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-48 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Unidad -->
            <td class="px-1" scope="col">
              <div role="status" class="flex justify-center animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-24 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Costo -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-32 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Especialidad -->
            <td class="px-1" scope="col">
              <div role="status" class="max-w-sm animate-pulse">
                <div
                  class="h-5 bg-gray300 rounded-full w-48 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
            <!-- Acciones -->
            <td scope="col">
              <div
                role="status"
                class="flex justify-center align-items-centermax-w-sm animate-pulse"
              >
                <div
                  class="h-5 bg-gray300 rounded-full w-28 xs:w-14 xs:h-3 mt-1 mb-1"
                ></div>
              </div>
            </td>
          </tr>
        </ng-container>
        <tr *ngIf="conceptos.length == 0 && !isLoading">
          <td colspan="6" class="text-center text-gray-700 font-medium py-1">
            No hay conceptos creados.
          </td>
        </tr>
        <tr
          *ngFor="let concepto of conceptos"
          class="font-medium text-gray700 hover:bg-gray200 animation duration-200 xs:text-[8px]"
        >
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="bg-transparent w-full"
              id="input-table"
              [(ngModel)]="concepto.codigo"
              (keydown.enter)="editar(concepto)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="bg-transparent w-full"
              id="input-table"
              [(ngModel)]="concepto.descripcion"
              (keydown.enter)="editar(concepto)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <input
              type="text"
              class="bg-transparent w-full text-center"
              id="input-table"
              [(ngModel)]="concepto.unidad"
              (keydown.enter)="editar(concepto)"
            />
          </td>
          <td class="px-1 py-[2px]" *ngIf="selectedConcepto == concepto.id">
            <input
              type="text"
              class="bg-transparent w-full text-end"
              id="input-table"
              [(ngModel)]="concepto.costoUnitario"
              (keydown.enter)="editar(concepto)"
            />
          </td>
          <td class="px-1 py-[2px]" *ngIf="selectedConcepto != concepto.id" >
            <input
              type="text"
              class="bg-transparent w-full text-end"
              id="input-table"
              [(ngModel)]="concepto.costoUnitarioConFormato"
              (click)="selectConcepto(concepto.id)"
            />
          </td>
          <td class="px-1 py-[2px]">
            <select
              id="idEspecialidad"
              class="bg-transparent w-full"
              aria-label="Default select example"
              [(ngModel)]="concepto.idEspecialidad"
              (ngModelChange)="editar(concepto)"
            >
              <option
                *ngFor="let especialidad of especialidades"
                [value]="especialidad.id"
              >
                {{ especialidad.descripcion }}
              </option>
            </select>
          </td>
          <td class="px-1 py-[2px]">
            <div class="flex justify-center m-0.5">
              <button
                ngbTooltip="Eliminar"
                placement="end"
                triggers="mouseenter:mouseleave"
                (click)="abrirDialogo(concepto.id)"
              >
                <img src="assets/delete.svg" alt="" />
              </button>
            </div>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
</section>
