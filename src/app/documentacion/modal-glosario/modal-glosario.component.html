<section *ngIf="isOpen">
  <div
    class="fixed inset-0 z-10 w-screen overflow-y-auto bg-black bg-opacity-50"
    (click)="cerrarModal()"
  >
    <div
      class="content-center sm:flex min-h-full items-center justify-center p-4 text-center sm:items-center sm:p-0"
    >
      <div
        class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-2xl"
        (click)="$event.stopPropagation()"
      >
        <!-- Cabecera -->
        <div class="flex items-center justify-between border-b px-4 py-3">
          <h2 class="text-lg font-semibold tracking-wide text-gray-800">{{ modalTitle }}</h2>
          <button
            (click)="cerrarModal()"
            type="button"
            class="px-3 py-1 text-2xl leading-none text-gray-500 transition hover:text-gray-700"
            [disabled]="isProcessing"
          >
            &times;
          </button>
        </div>

        <!-- Contenido -->
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <ng-container *ngIf="!isDeleteMode; else deleteMode">
            <form class="space-y-4" (ngSubmit)="ejecutarAccion()">
              <div>
                <label for="termino" class="mb-1 block text-sm font-medium text-gray-700"
                  >Término</label
                >
                <input
                  name="termino"
                  [(ngModel)]="glosarioTerminos.termino"
                  type="text"
                  id="termino"
                  class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm transition focus:border-colorButton focus:outline-none focus:ring-2 focus:ring-colorButton"
                  [disabled]="isProcessing"
                  required
                />
              </div>
              <div>
                <label for="descripcion" class="mb-1 block text-sm font-medium text-gray-700"
                  >Descripción</label
                >
                <textarea
                  name="descripcion"
                  [(ngModel)]="glosarioTerminos.definicion"
                  id="descripcion"
                  rows="4"
                  class="mt-1 block w-full rounded-md border border-gray-300 px-3 py-2 text-sm shadow-sm transition focus:border-colorButton focus:outline-none focus:ring-2 focus:ring-colorButton"
                  [disabled]="isProcessing"
                  required
                ></textarea>
              </div>
            </form>
          </ng-container>

          <ng-template #deleteMode>
            <div class="space-y-3 text-sm text-gray-600">
              <p>Estás a punto de eliminar el siguiente término del glosario:</p>
              <div class="rounded-md bg-error-50 p-4 text-error-700">
                <p class="m-0 font-semibold">{{ termino?.termino }}</p>
                <p class="mt-1 text-xs leading-relaxed text-error-600">{{ termino?.definicion }}</p>
              </div>
              <p class="text-xs text-gray-500">Esta acción no se puede deshacer.</p>
            </div>
          </ng-template>
        </div>

        <!-- Pie con botones -->
        <div class="flex justify-end gap-3 bg-gray-50 px-4 py-3">
          <button
            type="button"
            (click)="ejecutarAccion()"
            class="bg-colorButton hover:bg-colorButtonHover text-white py-2 px-4 rounded-md inline-flex justify-center shadow-sm ring-1 ring-inset transition-all"
            [disabled]="isProcessing"
          >
            <span *ngIf="isProcessing" class="material-icons mr-2 animate-spin text-base"
              >autorenew</span
            >
            {{ primaryButtonLabel }}
          </button>
          <button
            type="button"
            (click)="cerrarModal()"
            class="bg-colorButton hover:bg-colorButtonHover text-white py-2 px-4 rounded-md inline-flex justify-center shadow-sm ring-1 ring-inset transition-all"
            [disabled]="isProcessing"
          >
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
